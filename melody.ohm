Melody {
  Expr
    = (Directive
    | BlockDeclaration
    | Sequence)*

  BlockDeclaration
    = identifier "{" Directive* Sequence "}"

  Sequence (a sequence of notes)
    = "("* chord+ ")"*

  Directive
    = "#" identifier "=" ( note | identifier | digit+ )

  chord
    = note+

  note
    = (modnote | notebase) digit*

  modnote
    = notebase (flat | sharp)

  notebase
    ="a".."g"

  flat
    = ","

  sharp
    = "'"

  identifier
    = letter+
}
